var contacts;!function(a){function b(a){navigator.contacts.find(["*"],function(b){window.localStorage.setItem(d,JSON.stringify(b)),a(null)},function(){a("Error retrieving contacts from device.")})}function c(a,c,e){function f(){h=JSON.parse(window.localStorage.getItem(d)),null===h?(b(g),h=JSON.parse(window.localStorage.getItem(d))):g()}function g(){for(var b=0;null!==h&&b<h.length;b++)if(null!==h[b].phoneNumbers)for(var d=0;d<h[b].phoneNumbers.length;d++){var f=null,g=null===a,i=null===c;if(null!==a&&h[b].displayName===a&&(f=h[b],g=!0),null!==c){var j=h[b].phoneNumbers[d].value;j=j.replace(/[^\d]/g,""),j=j.replace(/^.*(\d{10})$/,"$1"),j===c&&(f=h[b],i=!0)}if(g&&i)return void e(h[b])}e(null)}var h;f()}var d="contacts";a.refreshContacts=b,a.getContact=c}(contacts||(contacts={}));